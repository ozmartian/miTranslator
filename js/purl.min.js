(function(n){typeof define=="function"&&define.amd?define(n):window.purl=n()})(function(){function v(n,t){for(var u=decodeURI(n),e=p[t||!1?"strict":"loose"].exec(u),i={attr:{},param:{},seg:{}},r=14;r--;)i.attr[s[r]]=e[r]||"";return i.param.query=f(i.attr.query),i.param.fragment=f(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}function a(n){var t=n.tagName;return typeof t!="undefined"?c[t.toLowerCase()]:t}function u(n,t){var i,r;if(n[t].length===0)return n[t]={};i={};for(r in n[t])i[r]=n[t][r];return n[t]=i,i}function r(t,f,e,o){var c=t.shift(),s;c?(s=f[e]=f[e]||[],"]"==c?n(s)?""!==o&&s.push(o):"object"==typeof s?s[h(s).length]=o:s=f[e]=[f[e],o]:~c.indexOf("]")?(c=c.substr(0,c.length-1),!i.test(c)&&n(s)&&(s=u(f,e)),r(t,s,c,o)):(!i.test(c)&&n(s)&&(s=u(f,e)),r(t,s,c,o))):n(f[e])?f[e].push(o):f[e]="object"==typeof f[e]?o:"undefined"==typeof f[e]?o:[f[e],o]}function w(t,u,f){var s,o,e;if(~u.indexOf("]"))s=u.split("["),r(s,t,"base",f);else{if(!i.test(u)&&n(t.base)){o={};for(e in t.base)o[e]=t.base[e];t.base=o}u!==""&&l(t.base,u,f)}return t}function f(n){return e(String(n).split(/&|;/),function(n,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}var u=t.indexOf("="),f=o(t),r=t.substr(0,f||u),i=t.substr(f||u,t.length);return i=i.substr(i.indexOf("=")+1,i.length),r===""&&(r=t,i=""),w(n,r,i)},{base:{}}).base}function l(t,i,r){var u=t[i];typeof u=="undefined"?t[i]=r:n(u)?u.push(r):t[i]=[u,r]}function o(n){for(var u=n.length,r,i,t=0;t<u;++t)if(i=n[t],"]"==i&&(r=!1),"["==i&&(r=!0),"="==i&&!r)return t}function e(n,t){for(var i=0,u=n.length>>0,r=arguments[2];i<u;)i in n&&(r=t.call(undefined,r,n[i],i,n)),++i;return r}function n(n){return Object.prototype.toString.call(n)==="[object Array]"}function h(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}function t(n,t){return arguments.length===1&&n===!0&&(t=!0,n=undefined),t=t||!1,n=n||window.location.toString(),{data:v(n,t),attr:function(n){return n=y[n]||n,typeof n!="undefined"?this.data.attr[n]:this.data.attr},param:function(n){return typeof n!="undefined"?this.data.param.query[n]:this.data.param.query},fparam:function(n){return typeof n!="undefined"?this.data.param.fragment[n]:this.data.param.fragment},segment:function(n){return typeof n=="undefined"?this.data.seg.path:(n=n<0?this.data.seg.path.length+n:n-1,this.data.seg.path[n])},fsegment:function(n){return typeof n=="undefined"?this.data.seg.fragment:(n=n<0?this.data.seg.fragment.length+n:n-1,this.data.seg.fragment[n])}}}var c={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],y={anchor:"fragment"},p={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},i=/^[0-9]+$/;return t.jQuery=function(n){n!=null&&(n.fn.url=function(i){var r="";return this.length&&(r=n(this).attr(a(this[0]))||""),t(r,i)},n.url=t)},t.jQuery(window.jQuery),t});